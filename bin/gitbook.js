// Generated by LiveScript 1.3.1
(function(){
  var shelljs, bluebird, debug, _module;
  shelljs = require('shelljs');
  bluebird = require('bluebird');
  debug = require('debug')(__filename);
  _module = function(){
    var gitbook;
    gitbook = function(directory){
      debug("Removing " + directory + "/_book");
      shelljs.rm('-rf', directory + "/_book");
      return new bluebird(function(resolve, rej){
        var cmd;
        cmd = __dirname + "/../node_modules/.bin/gitbook build -f json " + directory;
        debug(cmd);
        return shelljs.exec(cmd, {
          async: true,
          silent: true
        }, function(code, output){
          if (code) {
            debug("Error, " + output);
            return rej('sorry, command failed');
          } else {
            debug("Ok");
            return resolve('ok');
          }
        });
      });
    };
    return {
      gitbook: gitbook
    };
  };
  module.exports = _module();
}).call(this);
